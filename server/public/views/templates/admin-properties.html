<div ng-include="'views/partials/nav.html'"></div>
<md-button href="#/admin" class="md-raised">Go Back</md-button>

<div layout-gt-sm="row" layout="column" layout-padding layout-margin>
    <div flex="50">
        <!-- Add a new property and unit -->
        <md-content>
            <md-card>
                <md-card-title>
                    <md-card-title-text>
                        <span class="md-headline">Add a Property/Unit</span>
                    </md-card-title-text>
                </md-card-title>
                <md-card-content>
                    <md-input-container>
                        <label>Property Name</label>
                        <input ng-model="apc.AdminService.newProperty.name" type="text">
                    </md-input-container>
                    <md-input-container>
                        <label>Unit Number</label>
                        <input ng-model="apc.AdminService.newProperty.unit" type="number">
                    </md-input-container>
                    <md-button class="md-primary md-raised" ng-click="apc.addNewProperty()">Add Property</md-button>
                </md-card-content>
            </md-card>
        </md-content>
    </div>
    <div flex="50">
        <!-- Edit an existing property -->
        <md-content>
            <md-card>
                <md-card-title>
                    <md-card-title-text>
                        <span class="md-headline">Edit a Property</span>
                    </md-card-title-text>
                </md-card-title>
                <md-card-content>
                    <form ng-submit="$event.preventDefault()">
                        <md-autocomplete md-selected-item="apc.selectedItem" md-search-text-change="apc.searchTextChange(apc.searchText)" md-search-text="apc.searchText"
                            md-selected-item-change="apc.selectedItemChange(property)" md-items="property in apc.AdminService.uniqueProperties | filter: apc.searchText"
                            md-item-text="item" md-min-length="0" placeholder="Please select a property">
                            <md-item-template>
                                <span md-highlight-text="apc.searchText" md-highlight-flags="^i">{{property}}</span>
                            </md-item-template>
                            <md-not-found>
                                No properties matching "{{apc.searchText}}" were found.
                            </md-not-found>
                        </md-autocomplete>
                    </form>
                </md-card-content>
            </md-card>
        </md-content>
        <md-content style="height: 500px;" ng-if="apc.selectedItem">
            <md-card>
                <md-subheader class="md-primary">Edit {{apc.selectedItem}}</md-subheader>
                <md-list class="md-dense">
                    <md-list-item ng-repeat="property in apc.AdminService.allProperties | filter: apc.searchText | orderBy: 'unit'">
                        <div class="md-list-item-text">
                            <h3>Unit # {{property.unit}}</h3>
                            <p>
                                <md-checkbox ng-model="property.occupied" ng-change="apc.AdminService.updateOccupied(property)">Occupied</md-checkbox>
                            </p>
                        </div>
                        <md-button class="md-raised md-warn md-secondary" ng-click="apc.AdminService.deleteUnit(property.id)">Delete Unit</md-button>
                        <md-divider></md-divider>
                    </md-list-item>
                </md-list>
            </md-card>
        </md-content>
    </div>


</div>