<md-toolbar>
    <div class="md-toolbar-tools">
        <md-button ng-click="apc.openLeftMenu()" hide-gt-sm>
            Menu
        </md-button>
        <h2 md-truncate flex>Aeon Home Survey Admin</h2>
        <md-button>
            Logout Need to Get This Working
        </md-button>
    </div>
</md-toolbar>
<div layout="row" class="full-height">

    <div ng-include="'views/partials/sidenav.html'"></div>

    <md-content flex layout-padding>

        <div layout="column">
            <md-content>
                <md-content>
                    <h1>Add a Property/Unit</h1>
                    <md-input-container>
                        <label>Property Name</label>
                        <input ng-model="apc.AdminService.newProperty.name" type="text">
                    </md-input-container>
                    <md-input-container>
                        <label>Unit Number</label>
                        <input ng-model="apc.AdminService.newProperty.unit" type="number">
                    </md-input-container>
                    <md-button class="md-primary md-raised" ng-click="apc.addNewProperty()">Add Property</md-button>
                </md-content>
            </md-content>
            <md-content>
                <h1>Edit Properties</h1>
                <form ng-submit="$event.preventDefault()">
                    <md-autocomplete md-selected-item="apc.selectedItem" md-search-text-change="apc.searchTextChange(apc.searchText)" md-search-text="apc.searchText"
                        md-selected-item-change="apc.selectedItemChange(property)" md-items="property in apc.AdminService.uniqueProperties | filter: apc.searchText"
                        md-item-text="item" md-min-length="0" placeholder="Please select a property">
                        <md-item-template>
                            <span md-highlight-text="apc.searchText" md-highlight-flags="^i">{{property}}</span>
                        </md-item-template>
                        <md-not-found>
                            No properties matching "{{apc.searchText}}" were found.
                        </md-not-found>
                    </md-autocomplete>
                </form>
            </md-content>
            <md-card ng-if="apc.selectedItem">
                <div layout="row" layout-padding>
                    <div flex>
                        <h2>{{apc.selectedItem}}</h2>
                        <md-input-container>
                            <label>Add a Unit Number</label>
                            <input ng-model="apc.AdminService.newUnit.name" type="number">
                        </md-input-container>
                        <md-button class="md-primary md-raised" ng-click="apc.addNewUnit()">Add Unit</md-button>
                    </div>
                </div>
                <md-subheader class="md-primary">{{apc.selectedItem}} Units</md-subheader>
                <md-list class="md-dense">
                    <md-list-item ng-repeat="property in apc.AdminService.allProperties | filter: apc.searchText | orderBy: 'unit/1'">
                        <div class="md-list-item-text">
                            <h3>Unit # {{property.unit}}</h3>
                            <p>
                                <md-checkbox ng-model="property.occupied" ng-change="apc.AdminService.updateOccupied(property)">Occupied</md-checkbox>
                            </p>
                        </div>
                        <md-button class="md-raised md-warn md-secondary" ng-click="apc.AdminService.deleteUnit(property.id)">Delete Unit</md-button>
                        <md-divider></md-divider>
                    </md-list-item>
                </md-list>
            </md-card>

        </div>
    </md-content>

</div>