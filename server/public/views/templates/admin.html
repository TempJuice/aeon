<div ng-include="'views/partials/nav.loggedin.html'"></div>


<h1>Admin Page</h1>

<section id="admin-upload-container">

  <input type="file" id="admin-file-input" name="admin-file-input" accept=".csv">

  <md-input-container>
    <md-select ng-model="ac.yearToAdd" placeholder="Year to Add">
      <md-option ng-value="year" ng-repeat="year in ac.yearsArray">{{year}}</md-option>
    </md-select>
  </md-input-container>

    <md-button ng-show="ac.validInput" class="md-raised md-primary" ng-click="ac.startUpload()">Upload</md-button>
</section>

<section id="admin-export-container">
  <md-button class="md-raised md-accent" ng-click="ac.exportAllResponses()">Export Data</md-button>
</section>

<!-- Users Role and Active Status -->
<section id="users-status-container">
  <h1>Users</h1>    
        <md-card ng-repeat="user in ac.UserRolesService.users">
          <md-card-content>
            <p>{{ user.username }}</p>
            <p>User Status: <span ng-if="user.active">Active User</span><span ng-if="!user.active">Inactive User</span></p>
            <p>User Role: 
              <span ng-if="user.role == 'site_manager'">Active User</span>
              <span ng-if="user.role == 'admin'">Inactive User</span>
              <span ng-if="user.role !== 'admin' && user.role !== 'site_manager'">Not Assigned</span></p>
            <md-input-container class="md-block">
               <md-switch md-invert ng-change="ac.UserRolesService.toggleActiveStatus(user)" ng-model="user.active">Toggle Active Status</md-switch>
            </md-input-container>
            <md-input-container class="md-block">
              <label>Update User Role</label>
              <md-select ng-model="ac.userRole.role">
                <md-option value="not_assigned">Not Assigned</md-option>
                <md-option value="site_manager">Site Manager</md-option>
                <md-option value="admin">Admin</md-option>
              </md-select>
            </md-input-container>
          </md-card-content>
        </md-card>
</section>
